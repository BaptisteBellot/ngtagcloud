/**
 * Angular Tag cloud
 * Author : Damian Hamill
 * Repo: https://github.com/damianham/ngtagcloud
 * 
 * See Also: https://github.com/zeeshanhyder, https://github.com/lucaong/jQCloud
 */
angular.module("ngTagCloud",[]).directive("ngTagCloud",["$timeout","$log",function(t,e){function a(a,n,i,g){var o,l=function(t,e){return"undefined"==typeof t?e:t.replace("__tag__",e)},c=function(t){if(!(t.length<1)){for(var e=0,n=0,i=0;i<t.length;i++)t[i].weight=parseFloat(t[i].weight,10),t[i].weight>e?e=t[i].weight:n>0&&n>t[i].weight&&(n=t[i].weight)
var g,c=o.find("div")
c.empty(),angular.forEach(t,function(t){g=e>n?Math.round((t.weight-n)/(e-n)*9)+1:5
var i=document.createElement("span")
if(void 0!==a.tagClick&&""!==a.tagClick&&"function"==typeof a.tagClick)i.onclick=function(){a.tagClick({text:t.text})},i.append(t.text)
else if(void 0!==t.link&&""!==t.link&&"string"==typeof t.link||void 0!==a.tagLink&&""!==a.tagLink&&"string"==typeof a.tagLink){var o
o=void 0!==t.link&&""!==t.link&&"string"==typeof t.link?encodeURI(t.link).replace(/'/g,"%27"):l(a.tagLink,t.text)
var d=document.createElement("a")
d.href=o,d.appendChild(document.createTextNode(t.text)),i.append(d)}else i.append(t.text)
i.classList.add("w"+g),c.append(i)}),a.$apply()}},d=function(a){return"undefined"==typeof a.tagData||""===a.tagData?(e.error("ngTagCloud: data attribute is missing. Usage <ng-tag-cloud tag-data='expression'></ng-tag-cloud>\nSee: https://github.com/damianham/ngtagcloud"),!1):(a.$watchCollection("tagData",function(e,a){t(function(){c(e)},1e3)}),!0)}
d(a)!==!1&&(o=angular.element(n))}var n={restrict:"EA",scope:{tagOverflow:"=?",tagData:"=",tagLink:"@",tagClick:"&"},template:"<div id='ng-tag-cloud' class='ng-tag-cloud'></div>",link:a}
return n}])
