/**
 * Angular Tag cloud
 * Author : Damian Hamill
 * Repo: https://github.com/damianham/ngtagcloud
 * 
 * See Also: https://github.com/zeeshanhyder, https://github.com/lucaong/jQCloud
 */
angular.module("ngTagCloud",[]).directive("ngTagCloud",["$timeout","$log","$http",function(t,e,a){function n(n,i,g,o){var l,r=function(t,e){return"undefined"==typeof t?e:t.replace("__tag__",e)},d=function(t){if(!(t.length<1)){for(var e=0,a=0,i=0;i<t.length;i++)t[i].weight=parseFloat(t[i].weight,10),t[i].weight>e?e=t[i].weight:a>0&&a>t[i].weight&&(a=t[i].weight)
var g,o=l.find("div")
o.empty(),angular.forEach(t,function(t){g=e>a?Math.round((t.weight-a)/(e-a)*9)+1:5
var i=document.createElement("span")
if(void 0!==n.tagClick&&""!==n.tagClick&&"function"==typeof n.tagClick)i.onclick=function(){n.tagClick({text:t.text})},i.append(t.text)
else if(void 0!==t.link&&""!==t.link&&"string"==typeof t.link||void 0!==n.tagLink&&""!==n.tagLink&&"string"==typeof n.tagLink){var l
l=void 0!==t.link&&""!==t.link&&"string"==typeof t.link?encodeURI(t.link).replace(/'/g,"%27"):r(n.tagLink,t.text)
var d=document.createElement("a")
d.href=l,d.appendChild(document.createTextNode(t.text)),i.append(d)}else i.append(t.text)
i.classList.add("w"+g),o.append(i)}),n.$apply()}},c=function(n){return"undefined"!=typeof n.tagData&&""!==n.tagData||"undefined"!=typeof n.tagUrl&&""!==n.tagUrl?("undefined"!=typeof n.tagData&&""!==n.tagData?n.$watchCollection("tagData",function(e,a){t(function(){d(e)},100)}):a.get(n.tagUrl).then(function(e){t(function(){d(e.data)},100)},function(t){e.error(t)}),!0):(e.error("ngTagCloud: either tag-data or tag-url attribute must be present. Usage <ng-tag-cloud tag-data='expression' tag-url='url'></ng-tag-cloud>\nSee: https://github.com/damianham/ngtagcloud"),!1)}
c(n)!==!1&&(l=angular.element(i))}var i={restrict:"EA",scope:{tagUrl:"@",tagData:"=",tagLink:"@",tagClick:"&"},template:"<div id='ng-tag-cloud' class='ng-tag-cloud'></div>",link:n}
return i}])
